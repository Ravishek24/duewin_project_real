_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== SPRIBE AUTH ENDPOINT =====\n","timestamp":"2025-07-11 13:38:09 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request details: {\n  headers: {\n    connection: 'upgrade',\n    host: 'api.strikecolor1.com',\n    'x-real-ip': '54.78.240.177',\n    'x-forwarded-for': '54.78.240.177',\n    'x-forwarded-proto': 'https',\n    'content-length': '170',\n    accept: 'application/json, application/javascript, text/javascript, text/json',\n    'content-type': 'application/json; charset=UTF-8',\n    'user-agent': 'Apache-HttpClient/4.5.3 (Java/11.0.25)',\n    'accept-encoding': 'gzip,deflate'\n  },\n  body: {\n    platform: 'desktop',\n    currency: 'USD',\n    user_token: '2aede72568caaeaa79d3b52d7e4ab652a2b38a50e84d1b337413b914129f4527',\n    session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n  },\n  ip: '54.78.240.177'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:09 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Signature validation passed - processing auth request\nüîç Auth parameters: {\n  user_token: '2aede725...',\n  session_token: 'J6DX582C...',\n  platform: 'desktop',\n  currency: 'USD'\n}\n","timestamp":"2025-07-11 13:38:09 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Session found: { sessionId: 113, userId: 26, gameId: 'aviator' }\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119177.79 EUR\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119177.79 EUR = 119177.79 USD\n‚úÖ Auth successful: {\n  userId: 26,\n  username: 'kjdjsdfs',\n  balance: 119177790,\n  currency: 'USD'\n}\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119177.79 EUR\nConverted balance from EUR to USD: 119177.79 EUR = 119177.79 USD\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119177.79 EUR\nConverted balance from EUR to USD: 119177.79 EUR = 119177.79 USD\n","timestamp":"2025-07-11 13:38:10 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test7154019177',\n  action_id: 'c521f0bd-5bd5-49c4-85c5-b83049ae2da2',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7154019177';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7154019177';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7154019177';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119177.79, Change: -1, New balance: 119176.79\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119177.79 -> 119176.79\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7154019177',\n      'BET_1752241091265_8d280672',\n      'bet',\n      'c521f0bd-5bd5-49c4-85c5-b83049ae2da2',\n      11917779,\n      11917679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:11',\n      '2025-07-11 13:38:11'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7154019177',\n      'BET_1752241091265_8d280672',\n      'bet',\n      'c521f0bd-5bd5-49c4-85c5-b83049ae2da2',\n      11917779,\n      11917679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:11',\n      '2025-07-11 13:38:11'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test7154019177',\n    'BET_1752241091265_8d280672',\n    'bet',\n    'c521f0bd-5bd5-49c4-85c5-b83049ae2da2',\n    11917779,\n    11917679,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:11',\n    '2025-07-11 13:38:11'\n  ]\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119176.79 EUR\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119176.79 EUR = 119176.79 USD\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'rain',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3711694717',\n  action_id: 'b653c6d7-ba3c-440a-893f-31ed80a095c0',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3711694717';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3711694717';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3711694717';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119176.79, Change: -1, New balance: 119175.79\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119176.79 -> 119175.79\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3711694717',\n      'BET_1752241091618_3fa3d963',\n      'bet',\n      'b653c6d7-ba3c-440a-893f-31ed80a095c0',\n      11917679,\n      11917579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:11',\n      '2025-07-11 13:38:11'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3711694717',\n      'BET_1752241091618_3fa3d963',\n      'bet',\n      'b653c6d7-ba3c-440a-893f-31ed80a095c0',\n      11917679,\n      11917579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:11',\n      '2025-07-11 13:38:11'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3711694717',\n    'BET_1752241091618_3fa3d963',\n    'bet',\n    'b653c6d7-ba3c-440a-893f-31ed80a095c0',\n    11917679,\n    11917579,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:11',\n    '2025-07-11 13:38:11'\n  ]\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119175.79 EUR\nConverted balance from EUR to USD: 119175.79 EUR = 119175.79 USD\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 238351580,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test5153016949',\n  action_id: 'ad07910e-33e0-440e-81c8-ac8bb9dd8688',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5153016949';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5153016949';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5153016949';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -238351.58\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119175.79, Change: -238351.58, New balance: -119175.79\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Insufficient funds for user 26: current 119175.79, requested -238351.58\n","timestamp":"2025-07-11 13:38:11 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3542041737',\n  action_id: '1962cd13-3426-4689-b764-2456517e104b',\n  session_token: '214e0036-bc15-4d68-aee6-20b6205fec35'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3542041737';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3542041737';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3542041737';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119175.79, Change: -1, New balance: 119174.79\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119175.79 -> 119174.79\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3542041737',\n      'BET_1752241092149_69a1d83d',\n      'bet',\n      '1962cd13-3426-4689-b764-2456517e104b',\n      11917579,\n      11917479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:12',\n      '2025-07-11 13:38:12'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3542041737',\n      'BET_1752241092149_69a1d83d',\n      'bet',\n      '1962cd13-3426-4689-b764-2456517e104b',\n      11917579,\n      11917479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:12',\n      '2025-07-11 13:38:12'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3542041737',\n    'BET_1752241092149_69a1d83d',\n    'bet',\n    '1962cd13-3426-4689-b764-2456517e104b',\n    11917579,\n    11917479,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:12',\n    '2025-07-11 13:38:12'\n  ]\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119174.79 EUR\nConverted balance from EUR to USD: 119174.79 EUR = 119174.79 USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test1182422510',\n  action_id: 'c5bacad5-807b-4799-9ae8-1b111ffc76a7',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1182422510';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1182422510';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1182422510';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119174.79, Change: -1, New balance: 119173.79\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119174.79 -> 119173.79\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test1182422510',\n      'BET_1752241092494_ec22cd70',\n      'bet',\n      'c5bacad5-807b-4799-9ae8-1b111ffc76a7',\n      11917479,\n      11917379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:12',\n      '2025-07-11 13:38:12'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test1182422510',\n      'BET_1752241092494_ec22cd70',\n      'bet',\n      'c5bacad5-807b-4799-9ae8-1b111ffc76a7',\n      11917479,\n      11917379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:12',\n      '2025-07-11 13:38:12'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test1182422510',\n    'BET_1752241092494_ec22cd70',\n    'bet',\n    'c5bacad5-807b-4799-9ae8-1b111ffc76a7',\n    11917479,\n    11917379,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:12',\n    '2025-07-11 13:38:12'\n  ]\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119173.79 EUR\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119173.79 EUR = 119173.79 USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'rain',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3782828258',\n  action_id: 'aa5c5c07-0a92-44b0-9171-f26f1b3c1a8f',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3782828258';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3782828258';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3782828258';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119173.79, Change: -1, New balance: 119172.79\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119173.79 -> 119172.79\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3782828258',\n      'BET_1752241092826_bc889cf9',\n      'bet',\n      'aa5c5c07-0a92-44b0-9171-f26f1b3c1a8f',\n      11917379,\n      11917279,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:12',\n      '2025-07-11 13:38:12'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3782828258',\n      'BET_1752241092826_bc889cf9',\n      'bet',\n      'aa5c5c07-0a92-44b0-9171-f26f1b3c1a8f',\n      11917379,\n      11917279,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:12',\n      '2025-07-11 13:38:12'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3782828258',\n    'BET_1752241092826_bc889cf9',\n    'bet',\n    'aa5c5c07-0a92-44b0-9171-f26f1b3c1a8f',\n    11917379,\n    11917279,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:12',\n    '2025-07-11 13:38:12'\n  ]\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119172.79 EUR\nConverted balance from EUR to USD: 119172.79 EUR = 119172.79 USD\n","timestamp":"2025-07-11 13:38:12 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ ===== SPRIBE DEPOSIT ENDPOINT =====\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'freebet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test0042695366',\n  action_id: '50000cf2-9c6a-4d1d-aefd-4a463a8ab1ef',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1086:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test0042695366';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test0042695366';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test0042695366';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: +1\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119172.79, Change: 1, New balance: 119173.79\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119172.79 -> 119173.79\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üéâ Processing SPRIBE win: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE win transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processWinTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:459:31)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1122:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test0042695366',\n      'WIN_1752241093159_17c56ea6',\n      'win',\n      '50000cf2-9c6a-4d1d-aefd-4a463a8ab1ef',\n      11917279,\n      11917379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:13',\n      '2025-07-11 13:38:13'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test0042695366',\n      'WIN_1752241093159_17c56ea6',\n      'win',\n      '50000cf2-9c6a-4d1d-aefd-4a463a8ab1ef',\n      11917279,\n      11917379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:13',\n      '2025-07-11 13:38:13'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'win',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test0042695366',\n    'WIN_1752241093159_17c56ea6',\n    'win',\n    '50000cf2-9c6a-4d1d-aefd-4a463a8ab1ef',\n    11917279,\n    11917379,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:13',\n    '2025-07-11 13:38:13'\n  ]\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119173.79 EUR\nConverted balance from EUR to USD: 119173.79 EUR = 119173.79 USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ ===== SPRIBE DEPOSIT ENDPOINT =====\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'rainfreebet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test2664216090',\n  action_id: '04077d5c-e048-4b3a-b5f4-08d8a42d6634',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1086:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2664216090';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2664216090';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2664216090';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: +1\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119173.79, Change: 1, New balance: 119174.79\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119173.79 -> 119174.79\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üéâ Processing SPRIBE win: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE win transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processWinTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:459:31)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1122:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test2664216090',\n      'WIN_1752241093493_090d63a6',\n      'win',\n      '04077d5c-e048-4b3a-b5f4-08d8a42d6634',\n      11917379,\n      11917479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:13',\n      '2025-07-11 13:38:13'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test2664216090',\n      'WIN_1752241093493_090d63a6',\n      'win',\n      '04077d5c-e048-4b3a-b5f4-08d8a42d6634',\n      11917379,\n      11917479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:13',\n      '2025-07-11 13:38:13'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'win',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test2664216090',\n    'WIN_1752241093493_090d63a6',\n    'win',\n    '04077d5c-e048-4b3a-b5f4-08d8a42d6634',\n    11917379,\n    11917479,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:13',\n    '2025-07-11 13:38:13'\n  ]\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119174.79 EUR\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119174.79 EUR = 119174.79 USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ ===== SPRIBE DEPOSIT ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'promofreebet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3718704419',\n  action_id: '002f0662-998d-49fe-91b5-8114c7aa26bb',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1086:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3718704419';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3718704419';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3718704419';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: +1\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119174.79, Change: 1, New balance: 119175.79\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119174.79 -> 119175.79\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üéâ Processing SPRIBE win: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE win transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processWinTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:459:31)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1122:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3718704419',\n      'WIN_1752241093823_05aecca2',\n      'win',\n      '002f0662-998d-49fe-91b5-8114c7aa26bb',\n      11917479,\n      11917579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:13',\n      '2025-07-11 13:38:13'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3718704419',\n      'WIN_1752241093823_05aecca2',\n      'win',\n      '002f0662-998d-49fe-91b5-8114c7aa26bb',\n      11917479,\n      11917579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:13',\n      '2025-07-11 13:38:13'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'win',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3718704419',\n    'WIN_1752241093823_05aecca2',\n    'win',\n    '002f0662-998d-49fe-91b5-8114c7aa26bb',\n    11917479,\n    11917579,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:13',\n    '2025-07-11 13:38:13'\n  ]\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119175.79 EUR\nConverted balance from EUR to USD: 119175.79 EUR = 119175.79 USD\n","timestamp":"2025-07-11 13:38:13 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ ===== SPRIBE DEPOSIT ENDPOINT =====\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'challengefreebet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test6063776986',\n  action_id: '0bf2fd68-0b60-4145-bc53-dad78e9e93de',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1086:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test6063776986';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test6063776986';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test6063776986';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: +1\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119175.79, Change: 1, New balance: 119176.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119175.79 -> 119176.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üéâ Processing SPRIBE win: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE win transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processWinTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:459:31)\n    at async Object.handleDeposit (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1122:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:261:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test6063776986',\n      'WIN_1752241094187_ab9d3ea3',\n      'win',\n      '0bf2fd68-0b60-4145-bc53-dad78e9e93de',\n      11917579,\n      11917679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'win',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test6063776986',\n      'WIN_1752241094187_ab9d3ea3',\n      'win',\n      '0bf2fd68-0b60-4145-bc53-dad78e9e93de',\n      11917579,\n      11917679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'win',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test6063776986',\n    'WIN_1752241094187_ab9d3ea3',\n    'win',\n    '0bf2fd68-0b60-4145-bc53-dad78e9e93de',\n    11917579,\n    11917679,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:14',\n    '2025-07-11 13:38:14'\n  ]\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119176.79 EUR\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119176.79 EUR = 119176.79 USD\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test4575671914',\n  action_id: '699e36b0-8fe5-4e50-ad82-3e573562a25d',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4575671914';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4575671914';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4575671914';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119176.79, Change: -1, New balance: 119175.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119176.79 -> 119175.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4575671914',\n      'BET_1752241094535_aaa16cbc',\n      'bet',\n      '699e36b0-8fe5-4e50-ad82-3e573562a25d',\n      11917679,\n      11917579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4575671914',\n      'BET_1752241094535_aaa16cbc',\n      'bet',\n      '699e36b0-8fe5-4e50-ad82-3e573562a25d',\n      11917679,\n      11917579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test4575671914',\n    'BET_1752241094535_aaa16cbc',\n    'bet',\n    '699e36b0-8fe5-4e50-ad82-3e573562a25d',\n    11917679,\n    11917579,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:14',\n    '2025-07-11 13:38:14'\n  ]\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test8894637850',\n  action_id: '3d60561f-7af3-4ebe-939b-055ced3daf7d',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test8894637850';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test8894637850';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test8894637850';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119175.79, Change: -1, New balance: 119174.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119175.79 -> 119174.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test8894637850',\n      'BET_1752241094722_f08aade8',\n      'bet',\n      '3d60561f-7af3-4ebe-939b-055ced3daf7d',\n      11917579,\n      11917479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test8894637850',\n      'BET_1752241094722_f08aade8',\n      'bet',\n      '3d60561f-7af3-4ebe-939b-055ced3daf7d',\n      11917579,\n      11917479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test8894637850',\n    'BET_1752241094722_f08aade8',\n    'bet',\n    '3d60561f-7af3-4ebe-939b-055ced3daf7d',\n    11917579,\n    11917479,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:14',\n    '2025-07-11 13:38:14'\n  ]\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test7981397155',\n  action_id: '49cfcffc-d2e3-4fbc-8124-af9fa867db8d',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7981397155';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7981397155';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7981397155';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119174.79, Change: -1, New balance: 119173.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119174.79 -> 119173.79\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7981397155',\n      'BET_1752241094897_636cbd13',\n      'bet',\n      '49cfcffc-d2e3-4fbc-8124-af9fa867db8d',\n      11917479,\n      11917379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7981397155',\n      'BET_1752241094897_636cbd13',\n      'bet',\n      '49cfcffc-d2e3-4fbc-8124-af9fa867db8d',\n      11917479,\n      11917379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:14',\n      '2025-07-11 13:38:14'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test7981397155',\n    'BET_1752241094897_636cbd13',\n    'bet',\n    '49cfcffc-d2e3-4fbc-8124-af9fa867db8d',\n    11917479,\n    11917379,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:14',\n    '2025-07-11 13:38:14'\n  ]\n}\n","timestamp":"2025-07-11 13:38:14 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test5233747918',\n  action_id: '68bb79f0-73e5-4561-b73c-baef38bf147a',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5233747918';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5233747918';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5233747918';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119173.79, Change: -1, New balance: 119172.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119173.79 -> 119172.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test5233747918',\n      'BET_1752241095081_57ea6486',\n      'bet',\n      '68bb79f0-73e5-4561-b73c-baef38bf147a',\n      11917379,\n      11917279,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test5233747918',\n      'BET_1752241095081_57ea6486',\n      'bet',\n      '68bb79f0-73e5-4561-b73c-baef38bf147a',\n      11917379,\n      11917279,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test5233747918',\n    'BET_1752241095081_57ea6486',\n    'bet',\n    '68bb79f0-73e5-4561-b73c-baef38bf147a',\n    11917379,\n    11917279,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:15',\n    '2025-07-11 13:38:15'\n  ]\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test1689421430',\n  action_id: '6891e6ae-8c56-4378-8606-e21fa0deed9d',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1689421430';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1689421430';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1689421430';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119172.79, Change: -1, New balance: 119171.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119172.79 -> 119171.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test1689421430',\n      'BET_1752241095293_cb3bf1a8',\n      'bet',\n      '6891e6ae-8c56-4378-8606-e21fa0deed9d',\n      11917279,\n      11917179,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test1689421430',\n      'BET_1752241095293_cb3bf1a8',\n      'bet',\n      '6891e6ae-8c56-4378-8606-e21fa0deed9d',\n      11917279,\n      11917179,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test1689421430',\n    'BET_1752241095293_cb3bf1a8',\n    'bet',\n    '6891e6ae-8c56-4378-8606-e21fa0deed9d',\n    11917279,\n    11917179,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:15',\n    '2025-07-11 13:38:15'\n  ]\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîÑ ===== SPRIBE ROLLBACK ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  user_id: '26',\n  provider_tx_id: 'test4779037732',\n  action_id: '5b905483-e271-489b-a162-362bf9cd14c3',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL',\n  rollback_provider_tx_id: 'test1422878154'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleRollback (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1190:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:292:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4779037732';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4779037732';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4779037732';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleRollback (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:1208:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:292:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1422878154';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1422878154';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1422878154';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119171.79 EUR\nConverted balance from EUR to USD: 119171.79 EUR = 119171.79 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test7855390679',\n  action_id: 'bfde1ab8-6d68-4af9-b85e-f006d384a8ea',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3826855209',\n  action_id: '88a7878b-7f85-497b-bb77-3d3a61ff1c18',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test9499381079',\n  action_id: '656f0c5c-63c4-4217-b6df-7cce7e632273',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7855390679';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7855390679';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7855390679';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test7705837977',\n  action_id: '78f8f0a0-44ac-421c-8973-20cc93d109c7',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test2208773088',\n  action_id: 'd3d4ae85-7d5c-431f-820a-f9e33a451d56',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119171.79, Change: -1, New balance: 119170.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119171.79 -> 119170.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9499381079';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9499381079';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9499381079';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3826855209';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3826855209';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3826855209';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7705837977';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7705837977';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7705837977';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2208773088';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2208773088';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2208773088';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119170.79, Change: -1, New balance: 119169.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7855390679',\n      'BET_1752241095892_7e052f2d',\n      'bet',\n      'bfde1ab8-6d68-4af9-b85e-f006d384a8ea',\n      11917179,\n      11917079,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7855390679',\n      'BET_1752241095892_7e052f2d',\n      'bet',\n      'bfde1ab8-6d68-4af9-b85e-f006d384a8ea',\n      11917179,\n      11917079,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test7855390679',\n    'BET_1752241095892_7e052f2d',\n    'bet',\n    'bfde1ab8-6d68-4af9-b85e-f006d384a8ea',\n    11917179,\n    11917079,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:15',\n    '2025-07-11 13:38:15'\n  ]\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119169.79, Change: -1, New balance: 119168.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119170.79 -> 119169.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119169.79 -> 119168.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119168.79, Change: -1, New balance: 119167.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119168.79 -> 119167.79\nCurrent balance: 119167.79, Change: -1, New balance: 119166.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119167.79 -> 119166.79\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test9499381079',\n      'BET_1752241095982_34c0bb4f',\n      'bet',\n      '656f0c5c-63c4-4217-b6df-7cce7e632273',\n      11916979,\n      11916879,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test9499381079',\n      'BET_1752241095982_34c0bb4f',\n      'bet',\n      '656f0c5c-63c4-4217-b6df-7cce7e632273',\n      11916979,\n      11916879,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test9499381079',\n    'BET_1752241095982_34c0bb4f',\n    'bet',\n    '656f0c5c-63c4-4217-b6df-7cce7e632273',\n    11916979,\n    11916879,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:15',\n    '2025-07-11 13:38:15'\n  ]\n}\n","timestamp":"2025-07-11 13:38:15 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test2208773088',\n      'BET_1752241095999_ca6cb36a',\n      'bet',\n      'd3d4ae85-7d5c-431f-820a-f9e33a451d56',\n      11917079,\n      11916979,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test2208773088',\n      'BET_1752241095999_ca6cb36a',\n      'bet',\n      'd3d4ae85-7d5c-431f-820a-f9e33a451d56',\n      11917079,\n      11916979,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:15',\n      '2025-07-11 13:38:15'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test2208773088',\n    'BET_1752241095999_ca6cb36a',\n    'bet',\n    'd3d4ae85-7d5c-431f-820a-f9e33a451d56',\n    11917079,\n    11916979,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:15',\n    '2025-07-11 13:38:15'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7705837977',\n      'BET_1752241096001_69897c52',\n      'bet',\n      '78f8f0a0-44ac-421c-8973-20cc93d109c7',\n      11916879,\n      11916779,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7705837977',\n      'BET_1752241096001_69897c52',\n      'bet',\n      '78f8f0a0-44ac-421c-8973-20cc93d109c7',\n      11916879,\n      11916779,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test7705837977',\n    'BET_1752241096001_69897c52',\n    'bet',\n    '78f8f0a0-44ac-421c-8973-20cc93d109c7',\n    11916879,\n    11916779,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3826855209',\n      'BET_1752241096021_3283b5da',\n      'bet',\n      '88a7878b-7f85-497b-bb77-3d3a61ff1c18',\n      11916779,\n      11916679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3826855209',\n      'BET_1752241096021_3283b5da',\n      'bet',\n      '88a7878b-7f85-497b-bb77-3d3a61ff1c18',\n      11916779,\n      11916679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3826855209',\n    'BET_1752241096021_3283b5da',\n    'bet',\n    '88a7878b-7f85-497b-bb77-3d3a61ff1c18',\n    11916779,\n    11916679,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test5483936313',\n  action_id: '0849ab43-5d69-4a2f-8681-c2725810625f',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test4709530053',\n  action_id: 'e83bae96-8ff0-4e62-8f8b-2fbae8a439a9',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test2219587754',\n  action_id: '88b3d8ab-b574-49e6-951e-2ceac7272e39',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3058240447',\n  action_id: '1da38a26-a4d9-411b-959d-b68665a7424a',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test9218824908',\n  action_id: '2f0bbff7-7af8-496a-a1df-fcd17678eceb',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4709530053';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4709530053';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4709530053';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5483936313';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5483936313';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test5483936313';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2219587754';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2219587754';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test2219587754';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3058240447';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3058240447';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3058240447';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119166.79, Change: -1, New balance: 119165.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9218824908';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9218824908';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9218824908';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119165.79, Change: -1, New balance: 119164.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119166.79 -> 119165.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119165.79 -> 119164.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119164.79, Change: -1, New balance: 119163.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\nBalance update successful for user 26: 119164.79 -> 119163.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119163.79, Change: -1, New balance: 119162.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119163.79 -> 119162.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119162.79, Change: -1, New balance: 119161.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4709530053',\n      'BET_1752241096289_fdcdd5f1',\n      'bet',\n      'e83bae96-8ff0-4e62-8f8b-2fbae8a439a9',\n      11916679,\n      11916579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4709530053',\n      'BET_1752241096289_fdcdd5f1',\n      'bet',\n      'e83bae96-8ff0-4e62-8f8b-2fbae8a439a9',\n      11916679,\n      11916579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test4709530053',\n    'BET_1752241096289_fdcdd5f1',\n    'bet',\n    'e83bae96-8ff0-4e62-8f8b-2fbae8a439a9',\n    11916679,\n    11916579,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test5483936313',\n      'BET_1752241096290_0bbf5381',\n      'bet',\n      '0849ab43-5d69-4a2f-8681-c2725810625f',\n      11916579,\n      11916479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test5483936313',\n      'BET_1752241096290_0bbf5381',\n      'bet',\n      '0849ab43-5d69-4a2f-8681-c2725810625f',\n      11916579,\n      11916479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test5483936313',\n    'BET_1752241096290_0bbf5381',\n    'bet',\n    '0849ab43-5d69-4a2f-8681-c2725810625f',\n    11916579,\n    11916479,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test2219587754',\n      'BET_1752241096291_e14b52d5',\n      'bet',\n      '88b3d8ab-b574-49e6-951e-2ceac7272e39',\n      11916479,\n      11916379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test2219587754',\n      'BET_1752241096291_e14b52d5',\n      'bet',\n      '88b3d8ab-b574-49e6-951e-2ceac7272e39',\n      11916479,\n      11916379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test2219587754',\n    'BET_1752241096291_e14b52d5',\n    'bet',\n    '88b3d8ab-b574-49e6-951e-2ceac7272e39',\n    11916479,\n    11916379,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119162.79 -> 119161.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3058240447',\n      'BET_1752241096304_87a96e61',\n      'bet',\n      '1da38a26-a4d9-411b-959d-b68665a7424a',\n      11916379,\n      11916279,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3058240447',\n      'BET_1752241096304_87a96e61',\n      'bet',\n      '1da38a26-a4d9-411b-959d-b68665a7424a',\n      11916379,\n      11916279,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3058240447',\n    'BET_1752241096304_87a96e61',\n    'bet',\n    '1da38a26-a4d9-411b-959d-b68665a7424a',\n    11916379,\n    11916279,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test9218824908',\n      'BET_1752241096322_9e59f204',\n      'bet',\n      '2f0bbff7-7af8-496a-a1df-fcd17678eceb',\n      11916279,\n      11916179,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test9218824908',\n      'BET_1752241096322_9e59f204',\n      'bet',\n      '2f0bbff7-7af8-496a-a1df-fcd17678eceb',\n      11916279,\n      11916179,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test9218824908',\n    'BET_1752241096322_9e59f204',\n    'bet',\n    '2f0bbff7-7af8-496a-a1df-fcd17678eceb',\n    11916279,\n    11916179,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test9368610397',\n  action_id: '7350380d-4c0b-4b30-8886-120695bb87c8',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test4482661019',\n  action_id: 'e7ab7969-7c0b-45ca-8f5c-490272d34b82',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test4050090708',\n  action_id: 'f1bcaa66-89b8-41ec-ae60-91f979557dbb',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test6475709693',\n  action_id: '05906fbc-28fb-4ffc-8357-08946a526839',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üîê ===== VALIDATING SPRIBE SIGNATURE =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9368610397';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9368610397';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test9368610397';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4482661019';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4482661019';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4482661019';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\nüì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test1042532960',\n  action_id: '7b4996ab-e0b3-42e8-8b42-3a4a7121efa5',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4050090708';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4050090708';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test4050090708';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119161.79, Change: -1, New balance: 119160.79\nUpdating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test6475709693';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test6475709693';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test6475709693';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1042532960';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1042532960';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test1042532960';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119161.79 -> 119160.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119160.79, Change: -1, New balance: 119159.79\nUpdating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119160.79 -> 119159.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119159.79, Change: -1, New balance: 119158.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test9368610397',\n      'BET_1752241096555_92c394c1',\n      'bet',\n      '7350380d-4c0b-4b30-8886-120695bb87c8',\n      11916179,\n      11916079,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test9368610397',\n      'BET_1752241096555_92c394c1',\n      'bet',\n      '7350380d-4c0b-4b30-8886-120695bb87c8',\n      11916179,\n      11916079,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test9368610397',\n    'BET_1752241096555_92c394c1',\n    'bet',\n    '7350380d-4c0b-4b30-8886-120695bb87c8',\n    11916179,\n    11916079,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119159.79 -> 119158.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119158.79, Change: -1, New balance: 119157.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4482661019',\n      'BET_1752241096577_b086d743',\n      'bet',\n      'e7ab7969-7c0b-45ca-8f5c-490272d34b82',\n      11916079,\n      11915979,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4482661019',\n      'BET_1752241096577_b086d743',\n      'bet',\n      'e7ab7969-7c0b-45ca-8f5c-490272d34b82',\n      11916079,\n      11915979,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test4482661019',\n    'BET_1752241096577_b086d743',\n    'bet',\n    'e7ab7969-7c0b-45ca-8f5c-490272d34b82',\n    11916079,\n    11915979,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119158.79 -> 119157.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119157.79, Change: -1, New balance: 119156.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4050090708',\n      'BET_1752241096590_38e0208a',\n      'bet',\n      'f1bcaa66-89b8-41ec-ae60-91f979557dbb',\n      11915979,\n      11915879,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test4050090708',\n      'BET_1752241096590_38e0208a',\n      'bet',\n      'f1bcaa66-89b8-41ec-ae60-91f979557dbb',\n      11915979,\n      11915879,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test4050090708',\n    'BET_1752241096590_38e0208a',\n    'bet',\n    'f1bcaa66-89b8-41ec-ae60-91f979557dbb',\n    11915979,\n    11915879,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119157.79 -> 119156.79\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test6475709693',\n      'BET_1752241096604_ba31a171',\n      'bet',\n      '05906fbc-28fb-4ffc-8357-08946a526839',\n      11915879,\n      11915779,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test6475709693',\n      'BET_1752241096604_ba31a171',\n      'bet',\n      '05906fbc-28fb-4ffc-8357-08946a526839',\n      11915879,\n      11915779,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test6475709693',\n    'BET_1752241096604_ba31a171',\n    'bet',\n    '05906fbc-28fb-4ffc-8357-08946a526839',\n    11915879,\n    11915779,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test1042532960',\n      'BET_1752241096618_ac944193',\n      'bet',\n      '7b4996ab-e0b3-42e8-8b42-3a4a7121efa5',\n      11915779,\n      11915679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test1042532960',\n      'BET_1752241096618_ac944193',\n      'bet',\n      '7b4996ab-e0b3-42e8-8b42-3a4a7121efa5',\n      11915779,\n      11915679,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:16',\n      '2025-07-11 13:38:16'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test1042532960',\n    'BET_1752241096618_ac944193',\n    'bet',\n    '7b4996ab-e0b3-42e8-8b42-3a4a7121efa5',\n    11915779,\n    11915679,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:16',\n    '2025-07-11 13:38:16'\n  ]\n}\n","timestamp":"2025-07-11 13:38:16 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:18 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:18 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:18 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119156.79 EUR\nConverted balance from EUR to USD: 119156.79 EUR = 119156.79 USD\n","timestamp":"2025-07-11 13:38:18 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test7387601650',\n  action_id: 'eb4b9d3c-aa23-4d13-a711-bb5684c01dc5',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7387601650';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7387601650';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test7387601650';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119156.79, Change: -1, New balance: 119155.79\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119156.79 -> 119155.79\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7387601650',\n      'BET_1752241099140_d231e933',\n      'bet',\n      'eb4b9d3c-aa23-4d13-a711-bb5684c01dc5',\n      11915679,\n      11915579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:19',\n      '2025-07-11 13:38:19'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test7387601650',\n      'BET_1752241099140_d231e933',\n      'bet',\n      'eb4b9d3c-aa23-4d13-a711-bb5684c01dc5',\n      11915679,\n      11915579,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:19',\n      '2025-07-11 13:38:19'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test7387601650',\n    'BET_1752241099140_d231e933',\n    'bet',\n    'eb4b9d3c-aa23-4d13-a711-bb5684c01dc5',\n    11915679,\n    11915579,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:19',\n    '2025-07-11 13:38:19'\n  ]\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119155.79 EUR\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119155.79 EUR = 119155.79 USD\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test3854465468',\n  action_id: '77f59ab8-d8a6-48d0-8652-45c55f641686',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3854465468';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3854465468';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test3854465468';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119155.79, Change: -1, New balance: 119154.79\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119155.79 -> 119154.79\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3854465468',\n      'BET_1752241099463_900afb4e',\n      'bet',\n      '77f59ab8-d8a6-48d0-8652-45c55f641686',\n      11915579,\n      11915479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:19',\n      '2025-07-11 13:38:19'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test3854465468',\n      'BET_1752241099463_900afb4e',\n      'bet',\n      '77f59ab8-d8a6-48d0-8652-45c55f641686',\n      11915579,\n      11915479,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:19',\n      '2025-07-11 13:38:19'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test3854465468',\n    'BET_1752241099463_900afb4e',\n    'bet',\n    '77f59ab8-d8a6-48d0-8652-45c55f641686',\n    11915579,\n    11915479,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:19',\n    '2025-07-11 13:38:19'\n  ]\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ÑπÔ∏è ===== SPRIBE INFO ENDPOINT =====\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  user_id: '26',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Getting balance for user 26 in USD\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Third-party wallet balance for user 26: 119154.79 EUR\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Converted balance from EUR to USD: 119154.79 EUR = 119154.79 USD\n","timestamp":"2025-07-11 13:38:19 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∏ ===== SPRIBE WITHDRAW ENDPOINT =====\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¶ Request: {\n  currency: 'USD',\n  amount: 1000,\n  provider: 'spribe_aviator',\n  game: 'aviator',\n  action: 'bet',\n  platform: 'desktop',\n  user_id: '26',\n  provider_tx_id: 'test0723023820',\n  action_id: '959c05c8-25fa-4529-ba87-e009045507a3',\n  session_token: 'J6DX582CaZTRPfW8AuJoLu7KHg3KDfFL'\n}\nüîê ===== VALIDATING SPRIBE SIGNATURE =====\nüì¶ Headers received: { clientId: null, timestamp: undefined, signature: null }\n‚ö†Ô∏è Missing security headers - checking for test environment compatibility\n‚úÖ Test environment detected - allowing request without headers\nüîç Environment details: {\n  apiBaseUrl: 'https://dev-test.spribe.io/api',\n  nodeEnv: 'production',\n  securityMode: 'auto'\n}\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error finding SPRIBE transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.select (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:407:12)\n    at async SpribeTransaction.findAll (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1140:21)\n    at async SpribeTransaction.findOne (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1240:12)\n    at async findTransactionByProviderTxId (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:278:25)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:941:24)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test0723023820';\",\n    parameters: undefined\n  },\n  original: Error: Unknown column 'SpribeTransaction.ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Query.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'SpribeTransaction.ip_address' in 'field list'\",\n    sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test0723023820';\",\n    parameters: undefined\n  },\n  sql: \"SELECT `SpribeTransaction`.`id`, `SpribeTransaction`.`user_id`, `SpribeTransaction`.`session_id`, `SpribeTransaction`.`type`, `SpribeTransaction`.`amount`, `SpribeTransaction`.`currency`, `SpribeTransaction`.`provider`, `SpribeTransaction`.`game_id`, `SpribeTransaction`.`provider_tx_id`, `SpribeTransaction`.`operator_tx_id`, `SpribeTransaction`.`action`, `SpribeTransaction`.`action_id`, `SpribeTransaction`.`old_balance`, `SpribeTransaction`.`new_balance`, `SpribeTransaction`.`status`, `SpribeTransaction`.`withdraw_provider_tx_id`, `SpribeTransaction`.`platform`, `SpribeTransaction`.`ip_address`, `SpribeTransaction`.`created_at`, `SpribeTransaction`.`updated_at`, `session`.`id` AS `session.id`, `session`.`user_id` AS `session.user_id`, `session`.`game_id` AS `session.game_id`, `session`.`provider` AS `session.provider`, `session`.`launch_token` AS `session.launch_token`, `session`.`session_token` AS `session.session_token`, `session`.`currency` AS `session.currency`, `session`.`platform` AS `session.platform`, `session`.`ip_address` AS `session.ip_address`, `session`.`status` AS `session.status`, `session`.`started_at` AS `session.started_at`, `session`.`ended_at` AS `session.ended_at`, `session`.`created_at` AS `session.created_at`, `session`.`updated_at` AS `session.updated_at` FROM `spribe_transactions` AS `SpribeTransaction` LEFT OUTER JOIN `spribe_game_sessions` AS `session` ON `SpribeTransaction`.`session_id` = `session`.`id` WHERE `SpribeTransaction`.`provider_tx_id` = 'test0723023820';\",\n  parameters: {}\n}\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Updating balance for user 26: -1\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Current balance: 119154.79, Change: -1, New balance: 119153.79\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"Balance update successful for user 26: 119154.79 -> 119153.79\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üí∞ Processing SPRIBE bet: User 26, Amount 1 USD\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"‚ùå Error processing SPRIBE bet transaction: Error\n    at Query.run (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/mysql/query.js:52:25)\n    at /home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async MySQLQueryInterface.insert (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/dialects/abstract/query-interface.js:308:21)\n    at async SpribeTransaction.save (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:2490:35)\n    at async SpribeTransaction.create (/home/ubuntu/duewin_project_real-main/backend/node_modules/sequelize/lib/model.js:1362:12)\n    at async processBetTransaction (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:364:31)\n    at async Object.handleWithdraw (/home/ubuntu/duewin_project_real-main/backend/services/spribeService.js:986:20)\n    at async /home/ubuntu/duewin_project_real-main/backend/routes/spribeRoutes.js:227:20 {\n  name: 'SequelizeDatabaseError',\n  parent: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test0723023820',\n      'BET_1752241100246_1ad90faa',\n      'bet',\n      '959c05c8-25fa-4529-ba87-e009045507a3',\n      11915479,\n      11915379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:20',\n      '2025-07-11 13:38:20'\n    ]\n  },\n  original: Error: Unknown column 'ip_address' in 'field list'\n      at Packet.asError (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packets/packet.js:740:17)\n      at Prepare.execute (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/commands/command.js:29:26)\n      at Connection.handlePacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:475:34)\n      at PacketParser.onPacket (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:93:12)\n      at PacketParser.executeStart (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/packet_parser.js:75:16)\n      at Socket.<anonymous> (/home/ubuntu/duewin_project_real-main/backend/node_modules/mysql2/lib/base/connection.js:100:25)\n      at Socket.emit (node:events:517:28)\n      at addChunk (node:internal/streams/readable:368:12)\n      at readableAddChunk (node:internal/streams/readable:341:9)\n      at Readable.push (node:internal/streams/readable:278:10) {\n    code: 'ER_BAD_FIELD_ERROR',\n    errno: 1054,\n    sqlState: '42S22',\n    sqlMessage: \"Unknown column 'ip_address' in 'field list'\",\n    sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n    parameters: [\n      '26',\n      113,\n      'bet',\n      100,\n      'USD',\n      'spribe_aviator',\n      'aviator',\n      'test0723023820',\n      'BET_1752241100246_1ad90faa',\n      'bet',\n      '959c05c8-25fa-4529-ba87-e009045507a3',\n      11915479,\n      11915379,\n      'completed',\n      'desktop',\n      '127.0.0.1',\n      '2025-07-11 13:38:20',\n      '2025-07-11 13:38:20'\n    ]\n  },\n  sql: 'INSERT INTO `spribe_transactions` (`id`,`user_id`,`session_id`,`type`,`amount`,`currency`,`provider`,`game_id`,`provider_tx_id`,`operator_tx_id`,`action`,`action_id`,`old_balance`,`new_balance`,`status`,`platform`,`ip_address`,`created_at`,`updated_at`) VALUES (DEFAULT,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);',\n  parameters: [\n    '26',\n    113,\n    'bet',\n    100,\n    'USD',\n    'spribe_aviator',\n    'aviator',\n    'test0723023820',\n    'BET_1752241100246_1ad90faa',\n    'bet',\n    '959c05c8-25fa-4529-ba87-e009045507a3',\n    11915479,\n    11915379,\n    'completed',\n    'desktop',\n    '127.0.0.1',\n    '2025-07-11 13:38:20',\n    '2025-07-11 13:38:20'\n  ]\n}\n","timestamp":"2025-07-11 13:38:20 +00:00","type":"err","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for wingo_30 - 20250711000002056\n","timestamp":"2025-07-11 13:38:25 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for trx_wix_30 - 20250711000002056\n","timestamp":"2025-07-11 13:38:25 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for wingo_30 - 20250711000002057\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for wingo_60 - 20250711000001028\nüì¢ WebSocket: Betting closed for wingo_180 - 20250711000000342\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for trx_wix_30 - 20250711000002057\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for trx_wix_60 - 20250711000001028\nüì¢ WebSocket: Betting closed for trx_wix_180 - 20250711000000342\nüì¢ WebSocket: Betting closed for fiveD_60 - 20250711000001028\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for fiveD_180 - 20250711000000342\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for k3_60 - 20250711000001028\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for k3_180 - 20250711000000342\n","timestamp":"2025-07-11 13:38:55 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for wingo_30 - 20250711000002058\n","timestamp":"2025-07-11 13:39:25 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
0|duewin-backend  | {"message":"üì¢ WebSocket: Betting closed for trx_wix_30 - 20250711000002058\n","timestamp":"2025-07-11 13:39:25 +00:00","type":"out","process_id":0,"app_name":"duewin-backend"}
